"use strict";(self.webpackChunkPromptPal_github_io=self.webpackChunkPromptPal_github_io||[]).push([[2797],{8980:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>a,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var i=s(6070),r=s(5710);const o={sidebar_position:5},t="Webhook Integration",l={id:"basic/webhooks",title:"Webhook Integration",description:"Learn how to set up and use PromptPal's webhook system to receive real-time notifications when your prompts are executed.",source:"@site/docs/basic/webhooks.mdx",sourceDirName:"basic",slug:"/basic/webhooks",permalink:"/docs/basic/webhooks",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Continuous Integration",permalink:"/docs/basic/Continuous Integration"},next:{title:"Developer Experience",permalink:"/docs/category/developer-experience"}},d={},c=[{value:"What are Webhooks?",id:"what-are-webhooks",level:2},{value:"Key Webhook Features",id:"key-webhook-features",level:3},{value:"Use Cases",id:"use-cases",level:3},{value:"Setting Up Webhooks",id:"setting-up-webhooks",level:2},{value:"Understanding Webhook Payloads",id:"understanding-webhook-payloads",level:2},{value:"Request Details",id:"request-details",level:3},{value:"Payload Structure",id:"payload-structure",level:3},{value:"Field Reference",id:"field-reference",level:3},{value:"Implementing Webhook Endpoints",id:"implementing-webhook-endpoints",level:2},{value:"Basic Response",id:"basic-response",level:3},{value:"Example Implementations",id:"example-implementations",level:3},{value:"Node.js with Express",id:"nodejs-with-express",level:4},{value:"Python with Flask",id:"python-with-flask",level:4},{value:"Best Practices",id:"best-practices",level:2},{value:"Security",id:"security",level:3},{value:"Performance",id:"performance",level:3},{value:"Error Handling",id:"error-handling",level:3},{value:"Common Use Cases",id:"common-use-cases",level:2},{value:"Analytics Dashboard",id:"analytics-dashboard",level:3},{value:"Monitoring &amp; Alerts",id:"monitoring--alerts",level:3},{value:"Workflow Automation",id:"workflow-automation",level:3},{value:"Cost Tracking",id:"cost-tracking",level:3},{value:"Testing Your Webhook",id:"testing-your-webhook",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Webhook Not Received",id:"webhook-not-received",level:3},{value:"Timeout Issues",id:"timeout-issues",level:3},{value:"SSL/HTTPS Errors",id:"sslhttps-errors",level:3},{value:"Getting Help",id:"getting-help",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"webhook-integration",children:"Webhook Integration"}),"\n",(0,i.jsx)(n.p,{children:"Learn how to set up and use PromptPal's webhook system to receive real-time notifications when your prompts are executed."}),"\n",(0,i.jsx)(n.admonition,{title:"Get Started Quickly",type:"tip",children:(0,i.jsx)(n.p,{children:"Webhooks enable seamless integration with your existing systems, providing real-time notifications and powerful automation capabilities for your AI prompt workflows."})}),"\n",(0,i.jsx)(n.h2,{id:"what-are-webhooks",children:"What are Webhooks?"}),"\n",(0,i.jsxs)(n.p,{children:["Webhooks allow PromptPal to send automatic notifications to your applications when specific events occur. Currently, PromptPal supports the ",(0,i.jsx)(n.code,{children:"onPromptFinished"})," event, which triggers whenever a prompt execution completes (successfully or with errors)."]}),"\n",(0,i.jsx)(n.h3,{id:"key-webhook-features",children:"Key Webhook Features"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Real-time notifications"})," for prompt execution events"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Configurable endpoints"})," for different event types"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Secure delivery"})," with proper request validation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Reliable event delivery"})," with comprehensive logging"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"use-cases",children:"Use Cases"}),"\n",(0,i.jsx)(n.p,{children:"This enables you to:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Monitor prompt execution in real-time"}),"\n",(0,i.jsx)(n.li,{children:"Track usage analytics and performance metrics"}),"\n",(0,i.jsx)(n.li,{children:"Integrate with your existing systems and dashboards"}),"\n",(0,i.jsx)(n.li,{children:"Build automated workflows based on prompt results"}),"\n",(0,i.jsx)(n.li,{children:"Trigger CI/CD pipelines or external processes"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"setting-up-webhooks",children:"Setting Up Webhooks"}),"\n",(0,i.jsx)(n.p,{children:"Webhooks are configured per project in your PromptPal dashboard. Each webhook configuration includes:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Target URL"}),": The endpoint where notifications will be sent"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Event Type"}),": Currently ",(0,i.jsx)(n.code,{children:"onPromptFinished"})," for prompt completion events"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Status"}),": Enable/disable the webhook"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"To configure a webhook:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Navigate to your project settings"}),"\n",(0,i.jsx)(n.li,{children:"Go to the Webhooks section"}),"\n",(0,i.jsx)(n.li,{children:"Add your webhook endpoint URL"}),"\n",(0,i.jsx)(n.li,{children:"Enable the webhook"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"understanding-webhook-payloads",children:"Understanding Webhook Payloads"}),"\n",(0,i.jsx)(n.p,{children:"When a prompt finishes executing, PromptPal sends a POST request to your webhook URL with detailed information about the execution."}),"\n",(0,i.jsx)(n.h3,{id:"request-details",children:"Request Details"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Method"}),": ",(0,i.jsx)(n.code,{children:"POST"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Content-Type"}),": ",(0,i.jsx)(n.code,{children:"application/json"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"User-Agent"}),": ",(0,i.jsx)(n.code,{children:"PromptPal@{version}"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Timeout"}),": 10 seconds (your endpoint must respond within this time)"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"payload-structure",children:"Payload Structure"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "event": "onPromptFinished",\n  "projectId": 123,\n  "promptId": 456,\n  "userId": "user-123",\n  "result": 0,\n  "timestamp": "2024-01-15T10:30:00Z",\n  "duration": 1250,\n  "tokens": {\n    "prompt": 150,\n    "completion": 300,\n    "total": 450\n  },\n  "cached": false,\n  "ip": "192.168.1.1",\n  "userAgent": "Mozilla/5.0...",\n  "providerId": 789,\n  "providerDefaultModel": "gpt-4"\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"field-reference",children:"Field Reference"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Field"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"event"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsxs)(n.td,{children:["Always ",(0,i.jsx)(n.code,{children:'"onPromptFinished"'})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"projectId"})}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"ID of the project containing the prompt"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"promptId"})}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"ID of the executed prompt"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"userId"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"ID of the user who executed the prompt"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"result"})}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"0"})," for success, ",(0,i.jsx)(n.code,{children:"1"})," for failure"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"timestamp"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"When the prompt finished (ISO 8601 format)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"duration"})}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"Execution time in milliseconds"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"tokens.prompt"})}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"Tokens in the input prompt"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"tokens.completion"})}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"Tokens in the AI response"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"tokens.total"})}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"Total tokens used"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"cached"})}),(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:"Whether response was cached"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ip"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"Client IP address"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"userAgent"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"Client user agent"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"providerId"})}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"AI provider ID (optional)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"providerDefaultModel"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"Provider's default model (optional)"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"implementing-webhook-endpoints",children:"Implementing Webhook Endpoints"}),"\n",(0,i.jsx)(n.p,{children:"Your webhook endpoint should return a 2xx HTTP status code to indicate successful receipt."}),"\n",(0,i.jsx)(n.h3,{id:"basic-response",children:"Basic Response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:'HTTP/1.1 200 OK\nContent-Type: application/json\n\n{\n  "status": "received"\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"example-implementations",children:"Example Implementations"}),"\n",(0,i.jsx)(n.h4,{id:"nodejs-with-express",children:"Node.js with Express"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const express = require('express');\nconst app = express();\n\napp.use(express.json());\n\napp.post('/webhook/promptpal', (req, res) => {\n  const payload = req.body;\n  \n  console.log('Prompt executed:', {\n    projectId: payload.projectId,\n    promptId: payload.promptId,\n    success: payload.result === 0,\n    duration: payload.duration + 'ms',\n    totalTokens: payload.tokens.total\n  });\n  \n  // Your custom logic here\n  processWebhookData(payload);\n  \n  res.status(200).json({ status: 'received' });\n});\n\napp.listen(3000, () => {\n  console.log('Webhook server running on port 3000');\n});\n"})}),"\n",(0,i.jsx)(n.h4,{id:"python-with-flask",children:"Python with Flask"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from flask import Flask, request, jsonify\n\napp = Flask(__name__)\n\n@app.route('/webhook/promptpal', methods=['POST'])\ndef handle_webhook():\n    payload = request.get_json()\n    \n    print(f\"Prompt executed in project {payload['projectId']}\")\n    print(f\"Result: {'success' if payload['result'] == 0 else 'failure'}\")\n    print(f\"Duration: {payload['duration']}ms\")\n    print(f\"Tokens used: {payload['tokens']['total']}\")\n    \n    # Your custom logic here\n    process_webhook_data(payload)\n    \n    return jsonify({\"status\": \"received\"}), 200\n\nif __name__ == '__main__':\n    app.run(port=3000)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsx)(n.h3,{id:"security",children:"Security"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use HTTPS"}),": Always use HTTPS endpoints in production"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Validate payloads"}),": Check that requests contain expected fields"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Implement rate limiting"}),": Protect your endpoint from abuse"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Log requests"}),": Keep logs for monitoring and debugging"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"performance",children:"Performance"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Respond quickly"}),": Return 200 status immediately, process data asynchronously"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Handle timeouts"}),": Ensure your endpoint responds within 10 seconds"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Scale appropriately"}),": Design for your expected webhook volume"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"error-handling",children:"Error Handling"}),"\n",(0,i.jsx)(n.p,{children:"PromptPal considers any 2xx status code as successful delivery. For failed deliveries:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The failure is logged for monitoring"}),"\n",(0,i.jsx)(n.li,{children:"Webhook call details are recorded"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"No automatic retries"})," are performed"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"common-use-cases",children:"Common Use Cases"}),"\n",(0,i.jsx)(n.h3,{id:"analytics-dashboard",children:"Analytics Dashboard"}),"\n",(0,i.jsx)(n.p,{children:"Track prompt usage, success rates, and token consumption across your projects."}),"\n",(0,i.jsx)(n.h3,{id:"monitoring--alerts",children:"Monitoring & Alerts"}),"\n",(0,i.jsx)(n.p,{children:"Set up notifications when prompts fail or when token usage exceeds thresholds."}),"\n",(0,i.jsx)(n.h3,{id:"workflow-automation",children:"Workflow Automation"}),"\n",(0,i.jsx)(n.p,{children:"Trigger downstream processes based on prompt completion, such as updating databases or sending notifications."}),"\n",(0,i.jsx)(n.h3,{id:"cost-tracking",children:"Cost Tracking"}),"\n",(0,i.jsx)(n.p,{children:"Monitor token usage for billing and budget management."}),"\n",(0,i.jsx)(n.h2,{id:"testing-your-webhook",children:"Testing Your Webhook"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Set up a test endpoint"})," that logs all incoming requests"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Configure the webhook URL"})," in your PromptPal project settings"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Execute a test prompt"})," in your project"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Verify the webhook"})," is received at your endpoint"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["You can use tools like ",(0,i.jsx)(n.a,{href:"https://ngrok.com/",children:"ngrok"})," to create a public tunnel to your local development server for testing."]}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.h3,{id:"webhook-not-received",children:"Webhook Not Received"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Verify the webhook is enabled in project settings"}),"\n",(0,i.jsx)(n.li,{children:"Check that your endpoint URL is publicly accessible"}),"\n",(0,i.jsx)(n.li,{children:"Ensure your endpoint responds within 10 seconds"}),"\n",(0,i.jsx)(n.li,{children:"Test your endpoint URL directly"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"timeout-issues",children:"Timeout Issues"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Process webhook data asynchronously"}),"\n",(0,i.jsx)(n.li,{children:"Return a 200 response immediately"}),"\n",(0,i.jsx)(n.li,{children:"Optimize your webhook processing code"}),"\n",(0,i.jsx)(n.li,{children:"Consider queuing heavy processing tasks"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"sslhttps-errors",children:"SSL/HTTPS Errors"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Verify your SSL certificate is valid"}),"\n",(0,i.jsx)(n.li,{children:"Use a trusted certificate authority"}),"\n",(0,i.jsx)(n.li,{children:"Test your endpoint with SSL verification tools"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"getting-help",children:"Getting Help"}),"\n",(0,i.jsx)(n.p,{children:"If you encounter issues with webhook integration:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Check your endpoint logs for incoming requests"}),"\n",(0,i.jsx)(n.li,{children:"Review PromptPal's webhook delivery logs"}),"\n",(0,i.jsx)(n.li,{children:"Verify network connectivity and SSL certificates"}),"\n",(0,i.jsx)(n.li,{children:"Contact PromptPal support with specific error details"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Webhook logs in PromptPal include request/response details, timing information, and error messages to help diagnose delivery issues."})]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},5710:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>l});var i=s(758);const r={},o=i.createContext(r);function t(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);